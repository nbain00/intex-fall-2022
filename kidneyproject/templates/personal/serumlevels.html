{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>Serum Levels</title>
{% endblock %}
{% block content%}
<h2><b>Serum Levels</b></h2>
<br>
<a class = "btn btn-primary" href="{% url 'add-level' userid=pat.id%}">Create New Log Entry</a>
<br><br>
<div>
<canvas id="line-chart" width="800" height="450"></canvas>
</div>
<div class="container">
    {% for log in levels %}
    <p>
        {{ log.log_date }} - {{ log.name }}: {{ log.level }}
        <a class="btn btn-primary" href="{% url 'deleteLog' userid=pat.id logid=log.id %}">Delete</a>
    </p>
    {% endfor %}
</div>
<div>

<script>
    new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
            labels: [{% for data in levels %} '{{data.log_date}}', {%endfor%}],
            datasets: [ {% for data in serum_types %}
            {
                data: [{% for data1 in levels %} {% if data1.name == data.name %} {{data1.level}}, {% endif %} {% endfor %}],
                label: '{{data.name}}'
        
            }, {% endfor %}]            
        },
        options: {
            title: {
            display: true,
            text: 'World population per region (in millions)'
            },
            x: {
                type: 'time',
                time: {
                    unit: 'month'
                }
            }
        }
        });
</script>
</div>
{% endblock %}