{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>Food Journal</title>
{% endblock %}
{% block content%}

<h2><b>My Daily Food Journal</b></h2>
<br>
<form name="form" action="{% url 'journal' userid=pat.id date1='other' %}" method="post">
    {% csrf_token %}
    <label for="sDate">Select Date</label>
    <input type="date" name="sDate" id="sDate" value="{{showDate}}">
    <input type="submit" value="Show Meals on this Date">
</form>
<div class = "col-md-4" >
    <canvas id="myChart" ></canvas>
        <script>
        const ctx = document.getElementById('myChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['water', 'water to go'],
                datasets: [{
                    label: 'amount',
                    data: [{{chart_water}}, {{chart_waterNOT}}],
                    backgroundColor: [                                       
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(25, 80, 115, 0.2)',
                    ],
                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    subtitle: {
                        display: true,
                        text: {% if chart_water > 100 %}"You've exceed your water limit for the day!"{% else %}""{% endif %},
                        position: 'bottom'
                    },
                    title: {
                        display: true,
                        text: "Daily Target: " + {{RDA_water}} + " mL"
                    }
                }                     
            }
        });
        </script>
</div>
<div class = "col-md-4" >
    <canvas id="myChart4" ></canvas>
    <script>
    const ctx2 = document.getElementById('myChart4').getContext('2d');
    const myChart4 = new Chart(ctx2, {
        type: 'doughnut',
        data: {
            labels: ['protein', 'protein to go'],
            datasets: [{
                label: 'amount',
                data: [{{chart_protein}}, {{chart_proteinNOT}}],
                backgroundColor: [
                    'rgba(211, 167, 55, 0.8)',
                    'rgba(105, 83, 27, 0.8)',

                ],
                borderColor: [
                    'rgba(211, 167, 55, 1)',
                    'rgba(211, 167, 55, 1)',

                ],
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                subtitle: {
                    display: true,
                    text: {% if chart_protein > 100 %}"You've exceed your protein limit for the day!"{% else %}""{% endif %},
                    position: 'bottom'
                },
                title: {
                    display: true,
                    text: "Daily Target: " + Math.round({{RDA_protein}},2) + " grams"
                } 
            }                     
        }
    });
    </script>
</div>
<div class = "col-md-4" >
    <canvas id="myChart2" ></canvas>
        <script>
        const ctx5 = document.getElementById('myChart2').getContext('2d');
        const myChart2 = new Chart(ctx5, {
            type: 'doughnut',
            data: {
                labels: ['sodium', 'sodium to go'],
                datasets: [{
                    label: 'amount',
                    data: [{{chart_na}}, {{chart_naNOT}}],
                    backgroundColor: [
                        'rgba(211, 69, 55, 0.8)',
                        'rgba(105, 35, 27, 0.6)',
                    ],
                    borderColor: [
                        'rgba(211, 69, 55, 1)',
                        'rgba(211, 69, 55, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    subtitle: {
                        display: true,
                        text: {% if chart_na > 100 %}"You've exceed your sodium limit for the day!"{% else %}""{% endif %},
                        position: 'bottom'
                    },
                    title: {
                        display: true,
                        text: "Daily Target: " + {{RDA_na}} + " mg"
                    }
                }                     
            }
        });
        </script>
</div>
<div class = "col-md-4" >
    <canvas id="myChart6" ></canvas>
    <script>
    const ctx3 = document.getElementById('myChart6').getContext('2d');
    const myChart6 = new Chart(ctx3, {
        type: 'doughnut',
        data: {
            labels: ['carbohydrates', 'carbs to go'],
            datasets: [{
                label: 'amount',
                data: [{{chart_carbs}}, {{chart_carbsNOT}}],
                backgroundColor: [
                    'rgba(151, 55, 211, 0.8)',
                    'rgba(75, 26, 100, 0.8)'
                ],
                borderColor: [
                    'rgba(151, 55, 211, 1)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                subtitle: {
                    display: true,
                    text: {% if chart_carbs > 100 %}  "You've exceed your carb limit for the day!"{% endif %},
                    position: 'bottom'
                },
                title: {
                    display: true,
                    text: "Daily Target: " + {{RDA_carbs}} + " grams",
                }
            }
        }
    });
    </script>
</div>
<div class="container">
    <h3>Breakfast</h3><a class = "btn btn-primary" href="{% url 'food-in-meal' userid=pat.id mealtype='breakfast' logid=0 date1=showDate%}">Add food</a>
    <br>
    {% for food in breakfast %}
        {{food}}
        <br>
    {% endfor %}
    <br> 
    <h3>Lunch</h3><a class = "btn btn-primary" href="{% url 'food-in-meal' userid=pat.id mealtype='lunch' logid=0 date1=showDate%}">Add food</a>
    <br>
    {% for food in lunch %}
        {{food}}
        <br>
    {% endfor %}
    <br> 
    <h3>Dinner</h3><a class = "btn btn-primary" href="{% url 'food-in-meal' userid=pat.id mealtype='dinner' logid=0 date1=showDate%}">Add food</a>
    <br>
    {% for food in dinner %}
        {{food}}
        <br>
    {% endfor %}
    <br> 
    <h3>Snacks</h3><a class = "btn btn-primary" href="{% url 'food-in-meal' userid=pat.id mealtype='snacks' logid=0 date1=showDate%}">Add food</a>
    <br>
    {% for food in snacks %}
        {{food}}
        <br>
    {% endfor %} 
</div>
  
{% endblock %}